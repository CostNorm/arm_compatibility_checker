# \# CostNorm - LLM 기반 클라우드 비용 최적화 에이전트

팀은 클라우드 컴퓨팅을 이용하여 서비스를 운영할 때 비용 효율성을 극대화하기 위한 종합적인 접근 방식을 마련합니다. 클라우드 컴퓨팅 기반 서비스를 경제적으로 운영할 수 있도록 비용 절감을 위한 방법 추천 및 해당 작업 수행을 자동화해주는 LLM 기반 클라우드 비용 최적화 AI 에이전트 제작을 목표로 합니다.

최근, 대부분 기업이나 개인마저도 클라우드 컴퓨팅을 이용하여 본인의 서비스를 배포하는 것이 IT 업계의 트렌드가 되었습니다. 이는 초기 스타트업이나 소규모 학생 창업에서도 마찬가지입니다. 클라우드 컴퓨팅의 장점 중 하나인 "Pay-As-You-Go", "On-Demand"와 같은 비용정책 등으로 인해 기존 데이터 센터처럼 컴퓨팅, 스토리지 등의 자원을 이용하는데 소모되는 비용에 소유 비용이 포함되어 있지 않기 때문에, 누구나 아이디어를 빠르게 실현할 수 있기 때문입니다.

그러나 결국 클라우드 컴퓨팅도 이용하는 만큼 비용을 지불하지만, 컴퓨팅 자원을 필요한 만큼 배포하지 않거나, 사용자의 서비스 과금 이해도가 부족하거나, 사용되지 않는 자원을 꾸준히 모니터링 하지 않는다면 불필요한 비용이 발생하여 데이터센터나 호스팅 업체보다 훨씬 더 많은 비용을 사용하게 되는 결과를 낳게 될 수 있습니다.

이 프로젝트의 결과물인 LLM 기반 클라우드 비용 최적화 AI 에이전트를 통해 개인이나 기업 등 많은 사람들이 클라우드 컴퓨팅 운영에 사용되는 비용을 절감하는 것으로 추가적인 혁신을 이룰 수 있을 것으로 기대합니다.

물론, 기존에 클라우드 비용 절감에 대한 레퍼런스가 존재하지 않는 것은 아닙니다. 그러나, 클라우드 컴퓨팅은 컴퓨팅, 스토리지, 네트워크 등과 같은 여러 다양한 카테고리로 분리되어 있어 레퍼런스가 각각 흩어져 있고, 한 사람이 클라우드 컴퓨팅에서 사용할 수 있는 모든 서비스 영역을 커버하기란 쉽지 않습니다. 또한, 기업의 노하우로서 작용하는 부분이 있어 실제 설정 방법은 자세하게 나와있지 않은 경우가 많습니다. 이를 모든 데이터가 학습된 인공지능 기반 에이전트를 활용하여 해결할 것입니다.

저희는 흩어져 있는 비용 절감의 모범 사례 데이터를 모아서 인공지능에 학습시켜 모델을 튜닝하고, 이를 에이전트를 통해 클라우드를 잘 모르더라도 누구나 손쉽게 접근하여 비용 절감을 할 수 있도록 할 것입니다. 모든 사람에게 Open-Source로 공개해 누구나 공공적으로 이용할 수 있도록 하여 전문성이 부족한 사람이라도 이 에이전트 통해 클라우드 컴퓨팅을 비용 효율적으로 운영할 수 있도록 하는 것을 목표로 합니다.

## 기술 스택 및 구현 계획

### 1. Amazon Web Service

- 국내 및 전세계에서 가장 높은 점유율을 가지는 클라우드 제공업체인 AWS(Amazon Web Service)를 기반으로 개발할 계획임
- Amazon Bedrock을 사용하여 Meta LLama, Anthropic Claude와 같은 LLM 모델을 불러오고, 데이터를 입력해 Fine-Tuning할 수 있는 환경 구성
- Lambda를 활용한 Serverless Application으로 구축하는 것을 통해 추가적인 운영 비용이 들지 않는 챗봇 형태로 구현

### 2. Slack을 사용한 세부 관리 및 모니터링

- 기업부터 단순한 프로젝트 진행에서도 가장 많이 사용되는 메신저인 Slack 애플리케이션에 손쉽게 통합 및 사용할 수 있는 챗봇 형태로 배포되도록 제작
- Prompt Engineering을 통해 사용자의 입력(요구사항)을 식별하고, 해당 요구사항에 맞춰 클라우드 설정 작업까지 자동화 할 수 있도록 구현
- AWS 콘솔로 모니터링하는 데이터를 알림봇으로 Slack과 같은 메신저에 알림을 보내 사용 중인 리소스의 목록과 비용 과금 되는 수치를 확인하고, 에이전트는 사용하지 않는 리소스나 비용 최적화 가능 부분을 파악하여 추천 후 이를 실행하도록 구현

## 프로젝트 목표 및 예상되는 성과 결과물

Slack, Jandi, Discord 등 다양한 메신저에 배포할 수 있는 오픈소스 기반의 챗봇형 AI 에이전트를 제작합니다. 해당 에이전트는 주기적으로 현재 클라우드 과금 내역을 분석하여 보고서를 제공할 뿐 아니라, 컴퓨팅, 스토리지, 네트워크 3가지 주요 분야의 비용을 분석하고 예상보다 많은 과금이 발생하였을 경우 비용 절감 방안을 제시하고 사용자 요청 시 즉각적으로 적용할 수 있도록 합니다.

### 컴퓨팅 비용 최적화 전략

#### 다양한 컴퓨팅 제공 형태를 통한 비용 절감

- 사용자의 일일 비용 데이터에서 On-Demand 과금 유형으로 실행되고 있는 컴퓨팅 자원을 분석하여 Spot Instance 과금 유형으로 사용하도록 유도 및 설정을 자동화
- 비용은 저렴하지만 사용 방법의 복잡함으로 인해 기피되는 Spot Instance를 쉽게 사용할 수 있는 환경 마련
- On-Demand 환경 대비 최대 90% 비용 절감 가능
- 실제 프로그램이 동작하는 시간만큼 비용이 청구되는 서버리스 환경으로 기존 서비스를 대체하여 비용 절감

#### 적절한 비용 요금 정책 사용을 통한 컴퓨팅 자원 비용 절감

- 한달 간격의 비용을 분석하여 지속적으로 동일한 요금이 발생하는 자원의 경우, 예약 요금(최대 72% 절약) 이나 종량제 약정(최대 66% 절약) 등을 통한 비용 절감 유도

#### 컴퓨팅 자원 자동 스케일링으로 용량 조정 및 효율적 비용 관리

- 사용자가 원하는 요구에 맞추어 컴퓨팅 자원을 자동으로 스케일링 제공
- CPU/RAM 등의 사용량을 분석하여 불필요하게 많이 사용되고 있는 자원 식별 및 스케일링 유도

#### 적절한 컴퓨팅 자원 선택을 통한 비용 절감

- 사용자의 애플리케이션을 분석하여 ARM64와 같이 저렴한 아키텍처에서도 구동이 가능한 경우, 해당 아키텍처 사용 유도
- AMD64 아키텍처에서 ARM64 아키텍처로 이전 시 약 20% 비용 절감 및 40% 성능 향상 가능성 제시

### 에이전트 구현 방안

- 에이전트에 제공되는 데이터는 사용자의 질문과 클라우드 과금 내역 2가지로 구분됩니다.
  - 사용자의 질문의 경우, 사용자가 현재 구성한 솔루션에 대한 내용을 제공하면 에이전트는 이를 최적화하여 비용을 절감할 수 있는 방법을 제안합니다.
  - 매일 정해진 시간마다, 클라우드 과금 내역이 제공되는 경우 과금 내역을 분석해 과금이 많이 발생한 서비스를 식별하여 해당 서비스 관점에서 어떻게 비용 절감을 이루어낼 수 있는지 제시 후, 설정 방법과 설정 자동화 옵션을 사용자에게 제공합니다.
- 챗봇을 통해 사용자의 요청을 처리하기 위해 Prompt Engineering 기법이 사용되며, Prompt Engineering 기법과 더불어서 Function calling 기법이 적용됩니다.
  - Function calling 기법을 사용하여 사용자의 질문을 식별하여 현재 에이전트가 어떤 도구를 사용하여 사용자에게 해결책을 제시해야하는지 선택할 수 있도록 구성합니다.
- 세부 작업 흐름은 다음과 같을 수 있습니다.
  - 주기적으로 업무 메신저에 현재 과금 정보를 전달합니다. (ex> 컴퓨팅 자원 비용 10$, 가트워크 통신 비용 50$, 스토리지 비용 15\$)
  - 과금 정보를 LLM이 받아 들였을 때, 기존 내역과 분석하여 특정 부분의 비용이 많이 나타났다고 판단 된 경우, 해당 카테고리와 관련된 기능을 추가로 호출하도록 합니다. (ex> 네트워크 통신 비용이 50\$가 발생한 것은 인공지능이 비정상이라고 판단하여 optimize_newtork_cost 함수를 호출하도록 함.)

---

해당 계획서를 보고, 미사여구는 제외하고
LLM이 보고 오해없이 모든 사항을 잘 파악하고 디테일을 인지한 상태에서 에이전트 역할을 할 수 있도록 다시 깔끔하게 작성해볼래

## 프로젝트 개요 및 목표

이 프로젝트는 AWS 클라우드를 사용하는 기업 및 개인의 비용 절감을 목적으로 개발되는 LLM 기반 AI 에이전트입니다. 사용자가 클라우드 환경을 경제적으로 운영할 수 있도록 비용 절감 방안을 자동으로 제안하고, 필요 시 사용자의 요청에 따라 실제 설정을 수행할 수 있도록 지원합니다.

최종 목표는 누구나 쉽게 메신저 기반 챗봇 형태로 사용할 수 있는 클라우드 비용 최적화 에이전트를 오픈소스로 공개하여, 기술적 난이도에 관계없이 클라우드를 효율적으로 활용할 수 있도록 돕는 것입니다.

---

## 개발 기술 스택

### 클라우드 플랫폼 및 LLM 모델

- **AWS(Amazon Web Services)**
  - 최신 LLM 환경인 **Amazon Bedrock**에서 제공하는 모델들(예: Meta LLama, Anthropic Claude 등)을 이용하여 Fine-Tuning된 LLM 서비스 제공
  - Serverless 아키텍처 기반으로 구축 (AWS Lambda 활용하여 운영 비용 최소화)

### 메신저 기반 사용자 인터페이스

- 기업 및 개인이 널리 사용하는 메신저 중 하나인 **Slack**(메인 지원 플랫폼)을 중심으로 챗봇 형태로 배포
- 향후 Jandi, Discord 등 다른 메신저로도 쉽게 확장 가능하게 설계

---

## 에이전트의 주요 기능 및 동작 프로세스

에이전트는 기본적으로 다음 프로세스로 동작합니다:

1. **일정 주기(예: 하루 1회)로 사용자의 AWS 클라우드 과금 내역 데이터를 분석**
   - 비용 항목을 컴퓨팅, 스토리지, 네트워크 등 세부 카테고리로 나누어 분석
   - 비정상적인 비용 증가 또는 최적화 가능성이 발견되면 사용자에게 알림 메시지 발송
2. **사용자가 챗봇을 통해 비용 최적화 방법을 문의 또는 요청하면 비용 절감을 위한 추천 사항 제공**
   - Prompt Engineering을 통해 사용자의 요구사항을 이해
   - Function Calling 기법을 활용하여 최적화에 필요한 작업 함수를 호출 및 처리
3. **사용자가 추천 방안을 즉시 적용하고자 할 경우 실제 AWS 리소스 설정 및 조정 작업을 자동 실행**
   - Lambda 기반으로 AWS SDK/API를 이용하여 설정 변경을 자동화

---

## 비용 최적화 분야별 세부 전략

에이전트가 지원하는 비용 최적화 전략 및 실행 방법은 다음과 같습니다.

### 1. 컴퓨팅 비용 최적화

#### Spot Instance 활용 촉진

- On-Demand 인스턴스를 조회하여 Spot Instance로 변경 가능한 자원을 식별한 후 사용자에게 통보
- 사용자의 동의가 있을 경우 자동으로 Spot Instance로 변경하는 작업 수행 (최대 90% 비용 절감)

#### 서버리스(Serverless) 환경 유도

- 사용자의 워크로드가 서버리스 환경(Lambda, Fargate 등)으로 전환 가능한지를 판단
- 서버리스 도입이 비용측면에서 이점이 있을 경우 이를 추천하고 적용을 자동화

#### 예약 요금제 및 Savings Plan 이용 제안

- 비용 데이터를 분석하여 일정 기간 고정 비용이 발생하는 리소스를 확인
- 해당 리소스에 대해 예약 인스턴스(Reserved Instance, 최대 72% 절약) 또는 AWS Savings Plan(최대 66% 절약) 전환 추천 및 자동 적용 지원

#### 오토 스케일링을 통한 자원 최적화

- 주기적으로 CPU, 메모리 사용량 데이터를 분석하여 불필요하게 과다 투입된 자원을 파악
- Auto Scaling 설정을 통해 사용량 기반으로 자동 자원 축소 및 확대를 지원하여 효율성을 높임

#### 아키텍처 최적화

- 사용자의 애플리케이션이 ARM64(AWS Graviton) 아키텍처로 구동 가능한지 분석하여 추천
- 아키텍처 변경 시 비용 절감(약 20%)과 성능 개선(약 40%)을 사용자에게 안내 후 자동 적용 지원

---

## 에이전트 동작 세부 흐름 예시

### 단계 1: 클라우드 비용 데이터 분석 및 보고서 제공

- 매일 정해진 시간에 AWS 콘솔로부터 과금 데이터를 가져옵니다. (예: AWS Cost Explorer API 사용)
- 비용 데이터를 분석하여 Slack으로 요약 보고서 제공

```text
[Daily AWS Cost Report]
- EC2 컴퓨팅 비용: $10
- 네트워크 비용: $50 (경고: 비용 비정상적으로 증가)
- 스토리지(S3 등) 비용: $15
```

### 단계 2: 비용 문제 식별 및 자동 추천

- LLM이 이전 과금 데이터와 비교하여 특정 서비스에서 비정상 비용 증가를 판단합니다. (예: 네트워크 비용의 급증을 문제로 판단)
- 해당 비용 문제와 관련된 최적화 옵션(사전 정의된 Function)을 호출하여 Slack으로 사용자에게 비용 절감 방안을 제안합니다.

```text
⚠️ [비용 최적화 추천] 네트워크 비용이 전일 대비 150% 상승하였습니다. CloudFront 캐시 정책 개선 및 데이터 전송량 검사 권장합니다.
적용하시려면 "적용"을 입력하세요.
```

### 단계 3: 사용자 동의 후 최적화 작업 실행

- 사용자가 Slack에서 "적용" 명령어 입력 시, Lambda를 통해 관련 AWS API를 호출하여 추천된 최적화 작업을 자동 수행합니다.
- 작업 완료 보고서를 Slack을 통해 다시 사용자에게 안내합니다.

```text
✅ [작업 완료] CloudFront 캐시 TTL 조정 완료 및 데이터 전송량 모니터링 설정 적용되었습니다. 내일부터 비용 감소 확인 가능합니다.
```

---

## 결론 및 기대 효과

본 프로젝트는 AWS 클라우드 사용자가 전문적인 클라우드 지식이 없어도 쉽고 효율적으로 비용을 관리할 수 있도록 돕는 AI 기반의 자동화 에이전트입니다. 개발은 오픈소스로 진행되어 많은 사용자에게 무료로 제공되며, LLM 기반으로 최신 데이터를 학습하고 반영하여 효과적인 비용 최적화 전략을 지속 제공할 수 있도록 설계됩니다.
